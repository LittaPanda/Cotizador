<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7" manifest="app.manifest"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8" manifest="app.manifest"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9" manifest="app.manifest"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" manifest="app.manifest"> <!--<![endif]-->
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title>Cotizador</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <link rel="stylesheet" href="CSS/Vendors/normalize.css">
        <link rel="stylesheet" href="CSS/Vendors/main.css">
        <link rel="stylesheet" href="CSS/Vendors/jquery.mobile.structure-1.2.0.min.css">
        <link rel="stylesheet" href="CSS/Vendors/jquery.mobile.theme-1.2.0.min.css">
        <link rel="stylesheet" href="CSS/Vendors/jquery.mobile-1.2.0.min.css">
        <link rel="stylesheet" href="CSS/appStyle.css">
        <script src="Js/Vendors/modernizr.js"></script>
        <!--<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>-->
        <!--<script>window.jQuery || document.write('<script src="Js/Vendors/jquery.js"></script>')</script>-->
        <script src="Js/Vendors/jquery.js"></script>
        <script src="Js/Vendors/jquery.mobile-1.2.0.min.js"></script>
        <script src="Js/Vendors/jspdf.js"></script>
        <script src="Js/Vendors/jspdf.plugin.from_html.js"></script>
        <script src="Js/Vendors/jspdf.plugin.split_text_to_size.js"></script>
        <script src="Js/Vendors/jspdf.plugin.standard_fonts_metrics.js"></script>
        <script src="Js/Vendors/jspdf.plugin.addimage.js"></script>
        <script src="Js/Vendors/jspdf.plugin.ie_below_9_shim.js"></script>
        <script src="Js/Vendors/jspdf.plugin.sillysvgrenderer.js"></script>
        <script src="Js/Vendors/jspdf.PLUGINTEMPLATE.js"></script>
        <script src="Js/Vendors/handlebars.js"></script> 
        <script src="Js/quotationHelper.js"></script>  
        <script src="Js/plugins.js"></script>
        <script src="Js/main.js"></script>
        <script src="Js/Data.js"></script>
        <script src="Js/classDBSetup.js"></script>
        <script src="Js/classCar.js"></script>
        <script src="Js/dataManagement.js"></script>   
        <script src="Js/navigationManagement.js"></script>       
    </head>
    <body onLoad="javascript:init();">
    <!--Inicia HOME-->
        <div data-role="page" id="AppHome" data-theme="d">
            <div data-theme="d" data-role="header">
                    <h3>
                        Cotizador
                    </h3>
            </div>
            <div data-role="content">
            	<ul id="MainMenu" data-role="listview" data-divider-theme="a" data-inset="true">
                    <li data-role="list-divider" role="heading">
                        Menú principal
                    </li>
                    <li data-theme="a">
                        <a href="#BrandsPage" id="StartButton" data-transition="slide">
                            Entrar
                        </a>
                    </li>
                    <li data-theme="a">
                        <a href="" data-transition="slide">
                            Mis cotizaciones
                        </a>
                    </li>
                    <li data-theme="a">
                        <a href="" data-transition="slide">
                            Favoritos
                        </a>
                    </li>
                    <li data-theme="a">
                        <a href="" data-transition="slide">
                            Salir
                        </a>
                    </li>
                </ul>
                <div id="CopyrightContainer">
                	<label id="Copyright" title="Copyright">Copyright</label>
                </div>
            </div>
        </div>
    <!--Termina HOME-->
    <!--Inicia Marcas-->
    <div data-role="page" id="BrandsPage" data-theme="d">
    		<div data-theme="d" data-role="header">
                    <div data-role="navbar" data-iconpos="right">
                        <ul>
                            <li>
                            	<a href="#AppHome" data-rel="back" data-transition="slide" data-theme="a" data-icon="back">HOME</a>
                            </li>
                        </ul>
                	</div>
            </div>
            <div data-role="content">
            	<script id="Brands-template" type="text/x-handlebars-template">
					<div class="ui-grid-a">
						<div class="ui-block-a">
							{{#each blockA}}
								<div class="thisBlock">
									<div class="contenedorImagen turnImage">
										<a data-transition="slide" href="#ModelsPage?data={{brand}}" name="{{brand}}" id="{{brand}}">
											<img src="Img/{{brand}}.png" alt="{{brand}}" title="{{brand}}" class="imagenStyle"/>
										</a>
									</div>
								</div>
							{{/each}}
						</div>
						<div class="ui-block-b">
							{{#each blockB}}
								<div class="thisBlock">
									<div class="contenedorImagen turnImage">
										<a data-transition="slide" href="#ModelsPage?data={{brand}}" name="{{brand}}" id="{{brand}}">
											<img src="Img/{{brand}}.png" alt="{{brand}}" title="{{brand}}" class="imagenStyle"/>
										</a>
									</div>
								</div>
							{{/each}}
						</div>	   
					</div>				
                </script>
            	<div id="BrandsContainer"></div>
            </div>
    </div>
    <!--Termina Marcas-->
    <!--Inicia Modelos-->
    <div data-role="page" data-theme="d" id="ModelsPage">
    		<input type="hidden" id="SelectedModel" value="" />
            <div data-theme="d" data-role="header">
                    <div data-role="navbar" data-iconpos="top">
                        <ul>
                            <li><a href="#AppHome" data-rel="back" data-transition="slide" data-theme="a" data-icon="back">HOME</a></li>
                            <li><a href="#BrandsPage" data-rel="back" data-transition="slide" data-theme="a" data-icon="back">Marcas</a></li>
                        </ul>
                	</div>
            </div>
            <div data-role="content">
            	<script id="Models-template" type="text/x-handlebars-template">
					<div class="ui-grid-a">
						<div class="ui-block-a">
							{{#each blockA}}
								<div class="thisBlock">
									<div class="contenedorImagen turnImage">									
										<a data-transition="slide" href="#DetailPage?data={{brand}}&{{model}}" name="{{brand}}" id="{{model}}">
											<img src="Img/{{brand}}/{{model}}.png" alt="{{model}}" title="{{model}}" class="imagenStyle"/>
										</a>
									</div>
								</div>
							{{/each}}
						</div>
						<div class="ui-block-b">
							{{#each blockB}}
								<div class="thisBlock">
									<div class="contenedorImagen turnImage">
										<a data-transition="slide" href="#DetailPage?data={{brand}}&{{model}}" name="{{brand}}" id="{{model}}">
											<img src="Img/{{brand}}/{{model}}.png" alt="{{model}}" title="{{model}}" class="imagenStyle"/>
										</a>
									</div>
								</div>
							{{/each}}
						</div>	   
					</div>				
                </script>
            	<div id="ModelsContainer"></div>
            </div>
    </div>
    <!--Termina Modelos-->
    <!--Inicia Detalle-->
        <div data-role="page" data-theme="d" id="DetailPage">
    		<input type="hidden" id="SelectedColor" value="" />
            <input type="hidden" id="SelectedVersion" value="" />
            <div data-theme="d" data-role="header">
                    <div data-role="navbar" data-iconpos="top">
                        <ul>
                            <li><a href="#AppHome" data-rel="back" data-transition="slide" data-theme="a" data-icon="back">HOME</a></li>
                            <li><a href="#BrandsPage" data-rel="back" data-transition="slide" data-theme="a" data-icon="back">Marcas</a></li>
                            <li><a href="#ModelsPage" data-rel="back" data-transition="slide" data-theme="a" data-icon="back">Modelos</a></li>
                        </ul>
                	</div>
            </div>
            <div data-role="content">
            	<script id="Detail-template" type="text/x-handlebars-template">
					<div class="ui-grid-a">
						<div class="ui-block-a" style="text-align:center;"><h2>Precio: ${{price}}</h2></div>
						<div class="ui-block-b" >
								<select id="VersionSelector" onchange="javascript:onChangeDetailbyVersion('{{brand}}','{{model}}',this.id);">
									{{#each versions}}
									{{#if selected}}
										<option value="{{version}}" selected="{{selected}}">{{version}}</option>
									  {{else}}
										<option value="{{version}}">{{version}}</option>
									{{/if}}
									
									{{/each}}
								</select>
						</div>	   
					</div>
					<div class="ui-grid-solo">
						<div class="ui-block-a" style="text-align:center;">
							<img src="Img/{{brand}}/{{model}}{{color}}{{version}}.png" alt="{{model}}{{color}}{{version}}" />
						</div>
					</div>
					<div class="ui-grid-a">
						<div class="ui-block-a" style="text-align:center;">
							{{#each colors}}
									<img class="imgColors" onclick="javascript:onChangeDetailbyColor('{{brand}}','{{model}}','{{version}}','{{color}}');" src="Img/{{color}}.png" alt="{{color}}"/>
							{{/each}}
						</div>
						<div class="ui-block-b" id="ButtonContainer" style="text-align:center;">
							<a href="#PopupPage?data={{brand}}&{{model}}&{{version}}&{{color}}&{{description}}&{{price}}" data-rel="dialog" data-role="button" data-inline="true">Continuar</a>
						</div>	   
					</div>
                </script>
                
            	<div id="DetailContainer"></div>
                
            </div>
    </div>
    <!--Termina Detalle-->
    <!--Inicia Popup-->          
            <div id="PopupPage" data-theme="d" data-close-btn-text="Cerrar" data-role="dialog" >
            	<div data-role="header">
                	<h1>Datos del Cliente</h1>
                </div>
                <div data-role="content" class="content-primary">
					<script id="Popup-template" type="text/x-handlebars-template">
                        <form id="form_customer">
							<fieldset>
							<div data-role="fieldcontain" class="ui-field-contain ui-body ui-br">
                          		
									<input type="text" name="firstName" id="firstName" placeholder="Nombre" style="width:100%"/>
							</div>
							<div data-role="fieldcontain" class="ui-field-contain ui-body ui-br">
									<input type="text" name="lastName1" id="lastName1" placeholder="Apellido paterno" style="width:100%"/>
							</div>
							<div data-role="fieldcontain" class="ui-field-contain ui-body ui-br">
									<input type="text" name="lastName2" id="lastName2" placeholder="Apellido materno" style="width:100%"/>
							</div>
							<div data-role="fieldcontain" class="ui-field-contain ui-body ui-br">
									<input type="text" name="rfc" id="rfc" placeholder="RFC" style="width:100%"/>
							</div>
							<h4>Dirección</h4>
							<div data-role="fieldcontain" class="ui-field-contain ui-body ui-br">							
									<input type="text" name="address" id="address" placeholder="Calle" style="width:100%"/>
							</div>
							<div data-role="fieldcontain" class="ui-field-contain ui-body ui-br">
									<input type="text" name="neighborhood" id="neighborhood" placeholder="Colonia" style="width:100%"/>
							</div>
							<div data-role="fieldcontain" class="ui-field-contain ui-body ui-br">
									<input type="text" name="city" id="city" placeholder="Ciudad" style="width:100%"/>
							</div>
							<div data-role="fieldcontain" style="width:100%">
									<select id="StateSelector" name="stateSelector" style="width:100%">
										<option value="Estado">Estado</option>
										{{#each States}}
										<option value="{{State}}">{{State}}</option>
										{{/each}}
									</select>
							</div>
							<div data-role="fieldcontain" class="ui-field-contain ui-body ui-br">
									<input type="text" name="country" id="country" placeholder="País" style="width:100%"/>
							</div>
							<div data-role="fieldcontain" class="ui-field-contain ui-body ui-br">
									<input type="text" name="zipCode" id="zipCode" placeholder="Código Postal" style="width:100%"/>
							</div>
							<div data-role="fieldcontain" class="ui-field-contain ui-body ui-br">
									<input type="text" name="phone" id="phone" placeholder="Teléfono" style="width:100%"/>
							</div>
							<div data-role="fieldcontain" class="ui-field-contain ui-body ui-br">
									<input type="text" name="email" id="email" placeholder="Correo electrónico" style="width:100%"/>		
							</div>
							</fieldset>
							<div style="text-align:center">
								<a class="button" href="#ReportPage" data-role="button" data-theme="a" data-inline="true" data-icon="arrow-r">Enviar</a>
								<input data-role="button" type="reset" value="Limpiar" data-inline="true"/>
							</div>
							<input type="hidden" name="SelectedBrand" id="SelectedBrand" value="{{CarData.Brand}}" />
							<input type="hidden" name="SelectedModel" id="SelectedModel" value="{{CarData.Model}}" />
							<input type="hidden" name="SelectedVersion" id="SelectedVersion" value="{{CarData.Version}}" />
							<input type="hidden" name="SelectedColor" id="SelectedColor" value="{{CarData.Color}}" />
							<input type="hidden" name="SelectedDescription" id="SelectedDescription" value="{{CarData.Description}}" />
							<input type="hidden" name="SelectedPrice" id="SelectedPrice" value="{{CarData.Price}}" />
                        </form>
                    </script>
                    <div id="PopupContainer"></div>
                </div>
            </div>
    <!--Termina Popup-->
    <!--Inicia Reporte-->
    <div data-role="page" data-theme="d" id="ReportPage">    
    		<div data-theme="d" data-role="header">
                    <div data-role="navbar" data-iconpos="top">
                        <ul>
                            <li><a href="#AppHome" data-rel="back" data-transition="slide" data-theme="a" data-icon="back">HOME</a></li>
                            <li><a href="#BrandsPage" data-rel="back" data-transition="slide" data-theme="a" data-icon="back">Marcas</a></li>
                            <li><a href="#ModelsPage" data-rel="back" data-transition="slide" data-theme="a" data-icon="back">Modelos</a></li>
                            <li><a href="#DetailPage" data-rel="back" data-transition="slide" data-theme="a" data-icon="back">Detalle</a></li>
                        </ul>
                	</div>
            </div>        
            <div data-role="content">
            	<script id="Report-template" type="text/x-handlebars-template">					
					<div class="ui-grid-a">
						<div class="ui-block-a" style="text-align:center;">
							<div data-role="fieldcontain" class="ui-field-contain ui-body ui-br" >
								<label for="slider" class="ui-input-text ui-slider" id="slider-label">Mensualidades:</label>
								<input id="PeriodPay" type="number" data-type="range" name="slider" id="slider" value="{{CustomerData.period}}" min="6" max="48" step="6" class="ui-input-text ui-body-c ui-corner-all ui-shadow-inset ui-slider-input"/>								
							</div>
						</div>
						<div class="ui-block-b" >
							<div class="ui-block-a" id="RecalculateButtonContainer" style="text-align:center;">
								<a data-theme="a" id="RecalculateButton" onclick="javascript:onChangePeriod();" data-role="button" data-inline="false">Recalcular</a>
							</div>
							<div class="ui-block-a" id="ReportButtonContainer" style="text-align:center;">
								<a data-theme="a" onclick="javascript:CreatePDF();" data-role="button" data-inline="false">Generar reporte</a>
							</div>
						</div>	   
					</div>
					<div class="ui-grid-solo">
						<div class="ui-block-a" style="text-align:center;" id="ClientDataContainer">	
							<h4>Datos del Cliente</h4>						
							<table style="width:100%;text-align:left;">
								{{#if CustomerData}}
								<tr>
									<td>
										<input type="hidden" name="firstName" >{{CustomerData.firstName}}</label>
										<input type="hidden" name="lastName1" >{{CustomerData.lastName1}}</label>
										<input type="hidden" name="lastName2" >{{CustomerData.lastName2}}</label>
										<label class="firstBlock" name="fullName">Nombre: {{CustomerData.firstName}} {{CustomerData.lastName1}} {{CustomerData.lastName2}}</label>
									</td>
								</tr>
								<tr>
									<td>
										<label class="firstBlock" name="rfc" >R.F.C.: {{CustomerData.rfc}}</label>				
									</td>
								</tr>
								<tr>
									<td>
										<label class="firstBlock">Dirección: </label>
										{{#if CustomerData.address}}<label class="secondBlock" name="address" >{{CustomerData.address}} </label> {{/if}}
									</td>
									<td>
										{{#if CustomerData.neighborhood}}<label class="secondBlock" name="neighborhood" >{{CustomerData.neighborhood}} </label>{{/if}}
									</td>
									<td>
										{{#if CustomerData.city}}<label class="secondBlock" name="city" >{{CustomerData.city}} </label>{{/if}}
									</td>
									<td>
										{{#if CustomerData.stateSelector}}<label class="secondBlock" name="state" >{{CustomerData.stateSelector}} </label>{{/if}}
									</td>									
								</tr>
								<tr>
									<td>
										{{#if CustomerData.country}}<label class="secondBlock" name="country" >{{CustomerData.country}} </label>{{/if}}
									</td>
									<td>
										{{#if CustomerData.zipCode}}<label class="secondBlock" name="zipCode" >C.P.: {{CustomerData.zipCode}} </label>{{/if}}
									</td>
									<td>
										{{#if CustomerData.phone}}<label class="secondBlock" name="phone" >Teléfono: {{CustomerData.phone}} </label>{{/if}}
									</td>
									<td>
										{{#if CustomerData.email}}<label class="secondBlock" name="email" >Email: {{CustomerData.email}}</label>{{/if}}
									</td>
								</tr>
								{{/if}}
								<tr>
									<td>
										{{#if CarData.SelectedBrand}}<label class="thirdBlock" name="brand" >Marca: {{CarData.SelectedBrand}}</label>{{/if}}
									</td>
									<td>
										{{#if CarData.SelectedModel}}<label class="thirdBlock" name="model" >Modelo: {{CarData.SelectedModel}}</label>{{/if}}
									</td>
									<td>
										{{#if CarData.SelectedVersion}}<label class="thirdBlock" name="version" >Versión: {{CarData.SelectedVersion}}</label>{{/if}}
									</td>
									<td>
										{{#if CarData.SelectedPrice}}<label class="thirdBlock" name="price" >Precio: ${{CarData.SelectedPrice}}</label>{{/if}}
									</td>
								</tr>
							</table>
						</div>
					</div>
					<div class="ui-grid-e" id="GeneratedHeaderContainer">
							<div class="ui-block-a ui-bar-d" >		
								<div><h5>Número de Pago</h5></div>							
							</div>
							<div class="ui-block-b ui-bar-d">
								<div><h5>Pago</h5></div>					
							</div>	 
							<div class="ui-block-c ui-bar-d">
								<div><h5>Cuota de Interés</h5></div>
							</div>
							<div class="ui-block-d ui-bar-d">
								<div><h5>Cuota de Capital</h5></div>
							</div> 
							<div class="ui-block-e ui-bar-d">
								<div><h5>Saldo</h5></div>
							</div> 
							<div class="ui-block-f ui-bar-d">
								<div><h5>Capital Amortizado</h5></div>
							</div>						
					</div>	
					<div class="ui-grid-e" id="GeneratedDataContainer">
						{{#each AmortizedTable}}
						<div class="rowCont" style="width:100%;">
							<div class="ui-block-a">		
								<div id="{{numberOfPay}}"><p class="payment">{{numberOfPay}}</p></div>							
							</div>
							<div class="ui-block-b">
								<div><p>${{pay}}</p></div>						
							</div>	 
							<div class="ui-block-c">
								<div><p>${{interestAmount}}</p></div>
							</div>
							<div class="ui-block-d">
								<div><p>${{capitalAmount}}</p></div>	
							</div> 
							<div class="ui-block-e">
								<div><p>${{balance}}</p></div>
							</div> 
							<div class="ui-block-f">
								<div><p>${{amortizedCapital}}</p></div>
							</div>
						</div>
						{{/each}}
					</div>									
                </script>
                <div id="ReportContainer"></div>            	
            </div>
    </div>
    <!--Termina Reporte-->        
    </body>
</html>
